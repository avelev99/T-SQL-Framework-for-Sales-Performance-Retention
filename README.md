# E-Commerce Sales & Retention Mini Warehouse

This repository contains a complete miniature data warehouse built for
analysing sales and customer retention on an e-commerce platform.  The
project demonstrates how to design a star-schema, load data from
flat-files into a SQL Server database and perform basic analytical
queries.  It includes synthetic datasets generated by a Python script,
T-SQL scripts for table creation and loading, and a few example queries
that illustrate typical analyses such as revenue trends, top product
categories and customer retention.

## Background

E-commerce platforms collect data about orders, products, customers,
payments and reviews.  For example, the publicly available Olist
dataset (used in many analytics projects) contains order dates, product
details, payment and shipping information, customer and seller IDs and
customer reviews(717176379544312†L46-L58).  This variety of attributes
supports analyses ranging from revenue and order volumes to
understanding how customers behave over time.  To perform these
analyses efficiently it is common to load the raw data into a
structured warehouse with dimension and fact tables.

In this project the raw data is not taken from Olist directly.  Instead,
a synthetic data generator (`generate_data.py`) creates CSV files with
similar structure: customers, sellers, products, category translations,
orders, order items, order payments and order reviews.  Each order
includes dates for purchase, approval, shipping and delivery, and each
payment record contains the payment type and monetary value.  The
synthetic dataset is small (1 000 orders and roughly 200 customers) but
captures realistic relationships between entities, making it suitable
for demonstration purposes.

## Repository contents

```
tsql_ecommerce_project/
├── data/
│   ├── customers.csv                  - synthetic customer records
│   ├── sellers.csv                    - synthetic seller records
│   ├── products.csv                   - synthetic product catalogue
│   ├── product_category_translation.csv - mapping of category names to
│                                         an English equivalent
│   ├── orders.csv                    - order headers with timestamps and
│                                         statuses
│   ├── order_items.csv               - line-level items with prices and
│                                         freight values
│   ├── order_payments.csv            - payment sequences and values
│   └── order_reviews.csv             - customer review scores and dates
├── results/
│   ├── monthly_revenue.csv            - revenue by month (from Python analysis)
│   ├── top_categories.csv             - top five categories by sales
│   └── customer_retention.txt         - simple retention statistics
├── sql/
│   ├── create_tables.sql              - defines the star schema
│   ├── load_data.sql                 - creates staging tables and loads
│                                       data into dimensions and facts
│   └── analysis_queries.sql          - example queries
├── generate_data.py                 - Python script to generate synthetic data
└── README.md                        - this documentation
```

## Getting started

1. **Generate or obtain the data**.  Run the Python script to create
   the synthetic CSV files:

   ```bash
   python generate_data.py
   ```

   Alternatively, replace the contents of the `data/` directory with
   your own CSV files that follow the same column structure.

2. **Create the database and tables**.  Open `sql/create_tables.sql`
   in SQL Server Management Studio (SSMS) and execute the script.
   This will create a new database called `ECommerceMiniDW` and all
   dimension and fact tables.

3. **Load the data**.  Edit `sql/load_data.sql` and set the file
   paths in the `BULK INSERT` statements to point at the actual
   location of your CSV files.  Execute the script in SSMS to load the
   staging tables and populate the warehouse.

4. **Run analyses**.  Execute `sql/analysis_queries.sql` in SSMS to
   reproduce the example analyses.  You can modify or extend these
   queries to answer your own business questions.  For example,
   analysts often compute total revenue by month, the most popular
   product categories or average order value(717176379544312†L76-L166).

## Results

For convenience the repository includes a `results/` folder with CSV
and text files generated from the synthetic data using Python.  The
monthly revenue file summarises payment values by month, the top
categories file lists the five categories with the highest total sales,
and the customer retention file reports the number of unique customers
along with the proportion who made purchases in multiple months.  The
retention rate in the sample data is high because the generator
assigns orders across many months for most customers.

## Extending the project

This mini warehouse is intentionally simple, but it can serve as a
foundation for deeper analytics.  Possible extensions include:

* **Data quality and enrichment** - incorporate real e-commerce
  datasets, add additional attributes (e.g., customer demographics or
  product descriptions) and perform data cleansing.  The Olist
  dataset includes customer and seller demographics, payment and
  shipping details and customer reviews(717176379544312†L50-L58).
* **Slowly changing dimensions** - handle changes over time in
  customer or seller attributes.
* **Advanced retention analysis** - compute cohort-based retention,
  lifetime value (LTV) or churn models.
* **Visualisation** - connect the warehouse to BI tools such as
  Power BI or Tableau to build dashboards.

## Citation

This project is inspired by the publicly available Brazilian e-commerce
dataset from Olist.  The dataset contains detailed information about
orders, products, payments, shipping and reviews(717176379544312†L46-L58).  Our
synthetic generator emulates its structure for demonstration purposes.

---

If you have any questions or suggestions feel free to open an issue or
submit a pull request.  Happy analysing!